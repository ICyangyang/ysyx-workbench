## TRM图灵机
- "图灵机"(Turing Machine, TRM)，核心思想：存储程序
> 结构上, TRM有存储器, 有PC, 有寄存器, 有加法器
> 工作方式上, TRM不断地重复以下过程: 从PC指示的存储器位置取出指令, 执行指令, 然后更新PC
- 例如, 下面的指令序列可以计算1+2+...+100, 其中r1和r2是两个寄存器, 还有一个隐含的程序计数器PC, 它的初值是0. 为了帮助大家理解, 我们把指令的语义翻译成C代码放在右侧, 其中每一行C代码前都添加了一个语句标号:

```bash
// PC: instruction    | // label: statement
0: mov  r1, 0         |  pc0: r1 = 0;
1: mov  r2, 0         |  pc1: r2 = 0;
2: addi r2, r2, 1     |  pc2: r2 = r2 + 1;
3: add  r1, r1, r2    |  pc3: r1 = r1 + r2;
4: blt  r2, 100, 2    |  pc4: if (r2 < 100) goto pc2;   // branch if less than
5: jmp 5              |  pc5: goto pc5;
```
> 计算机执行以上的指令序列, 最后会在PC=5处的指令陷入死循环, 此时计算已经结束, 1+2+...+100的结果会存放在寄存器r1中.
## 监视器Monitor
- Monitor(监视器)模块是为了方便地监控客户计算机的运行状态而引入的.
> 负责与GNU/Linux进行交互(例如读入客户程序)
> 
> 调试器功能, 为NEMU的调试提供方便的途径.
- NEMU的基本功能
> 是一个用来执行客户程序的程序,
- NEMU的基本框架
> 框架代码将ISA之间的差异抽象成API, 基本框架会调用这些API, 从而无需关心ISA的具体细节.

## 配置系统kconfig
- 目前我们只需要关心配置系统生成的如下文件:
nemu/include/generated/autoconf.h, 即可以被包含到C代码中的宏定义，阅读C代码时使用
nemu/include/config/auto.conf，即可以被包含到Makefile中的变量定义， 阅读Makefile时使用
## 项目构建和Makefile
- makefile文件中$@和$<等符号的含义：

```bash
# 编译.c文件到.o文件的模式规则
%.o: %.c
	$(CC) -c $< -o $@
```
- 在这个规则中：
$@会被替换成目标文件名（比如foo.o）。
$<会被替换成第一个依赖文件名（比如foo.c）。
## init_isa()函数进行ISA相关初始化
- init_isa()第1项任务需要将一个内置的客户程序读入到内存中。客户计算机的CPU可以执行客户程序，采取约定的方式让CPU直接从约定的内存位置开始执行.
> 真实的计算机系统中, 计算机启动后首先会把控制权交给BIOS, BIOS经过一系列初始化工作之后, 再从磁盘中将有意义的程序读入内存中执行.
- init_isa()第2项任务初始化寄存器。初始化寄存器的重要工作是设置cpu.pc的初值, 设置成刚才加载客户程序的内存位置, 让CPU从约定的内存位置开始执行客户程序.
> x86的物理内存是从0开始编址
>
> mips32和riscv32的物理地址均从0x80000000开始，其CONFIG_MBASE将会被定义成0x80000000
## 简易调试器

